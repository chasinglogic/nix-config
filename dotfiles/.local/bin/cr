#!/usr/bin/env bash

set -eou pipefail

ARGS="$@"
if [[ $ARGS != *"--base"* ]]; then
    NAME=$(basename $(git rev-parse --show-toplevel))
    BASE=""
    if [[ $NAME == "MPBX" ]]; then
        BASE="release/v5"
    else
        BASE="master"
    fi

    ARGS="$ARGS --base $BASE"
fi

if [[ $(pwd) == *"/Work/"* ]]; then
    ARGS="$ARGS --reviewer mpb-com/backend";
fi

URL=$(gh pr create --fill --assignee chasinglogic $ARGS)
xdg-open $URL
